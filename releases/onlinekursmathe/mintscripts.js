function extround(c,a){var b;b=Math.pow(10,a);c=(Math.round(c*b)/b);return c}function notationParser_IN(a){a=a.replace(/\,/g,".");a=a.replace(/\;/g,",");if(a.lastIndexOf("^")==(a.length-1)){a=a.slice(0,a.length-1)}if(a.lastIndexOf("_")==(a.length-1)){a=a.slice(0,a.length-1)}a.replace(/&nbsp;/g," ");a.replace(/\t/g," ");return a}function notationParser_OUT(a){a=a.replace(/\,/g,";");a=a.replace(/\\right\./g,"\\right\\DOTESCAPE");a=a.replace(/\./g,",");a=a.replace(/\\right\\DOTESCAPE/g,"\\right.");return a}function mygcd(e,c){if(!c){return e}return mygcd(c,e%c)}function CreateQuestionObj(p,m,k,a,o,i,h,g,q){k=k.replace(/\&amp;/g,"&");k=k.replace(/\&\#38;/g,"&");k=k.replace(/\&\#166;/g,"|");k=k.replace(/\&\#60;/g,"<");k=k.replace(/\&\#62\;/g,">");k=k.replace(/\&lt\;/g,"<");k=k.replace(/\&gt\;/g,">");ob=Object.create(null);ob.counter=m;ob.id=a;if(p.indexOf("AUTOGENERATED")!=-1){ob.sync=0}else{ob.sync=1}if(o==2){if(k.indexOf("::smc")!=-1){var b=k.substr(k.indexOf("::smc")+5,k.length-k.indexOf("::smc")-5);k=k.substr(0,k.indexOf("::smc"));ob.smc=b.split(",");ob.imgid=null}else{ob.smc=new Array();ob.imgid=i}}else{ob.imgid="QM"+ob.id}if((o==6)||(o==7)){ob.solution=k.replace(/\;/gi,",");try{ob.solcodea=mathJS.compile("0");ob.solcodeb=mathJS.compile("0")}catch(j){logMessage(CLIENTERROR,"Solution of type "+o+" not compileable: "+k);ob.solcodea=mathJS.compile("0");ob.solcodeb=mathJS.compile("0")}}else{ob.solution=k;try{if((o!=1)&&(o!=3)&&(o!=6)&&(o!=7)){var f=mparser.convertMathInput(k);ob.solcode=mathJS.compile(f.mathjs)}else{ob.solcode=mathJS.compile("0")}logMessage(VERBOSEINFO,"Successfully compiled "+k)}catch(j){logMessage(CLIENTERROR,"Solution of type "+o+" not compileable: "+k+", exception = "+JSON.stringify(j));ob.solcode=mathJS.compile("0")}}ob.valcode=mathJS.compile("0");ob.valvalid=false;ob.type=o;ob.option=i;ob.maxpoints=h;ob.points=0;ob.message="";ob.element=null;ob.intest=(g>=1);ob.section=q;ob.uxid=p;ob.value=0;ob.rawinput="";ob.texinput="";ob.parsedinput="";ob.prepare=function(){this.element=document.getElementById(this.id);if(this.type==2){this.image=document.getElementById(this.option)}};if((o==1)|(o==3)|(o==4)|(o==5)|(o==6)|(o==7)){ob.rawloadvalue=function(c){document.getElementById(this.id).value=c;this.rawinput=c;check_group(this.counter,this.counter)};ob.clear=function(){this.texinput="\\text{(Keine Eingabe)}";this.parsedinput="0";this.valcode=mathJS.compile("0");this.valvalid=false;this.rawloadvalue("")}}else{if(o==2){if(ob.solution=="0"){ob.solution="2"}else{ob.solution="1"}ob.clear=function(){this.element.checked=false;this.element.indeterminate=true;this.value="0";this.element.cval="0";this.message="";this.image.src="../../images/questionmark.png";notifyPoints(this.counter,0,SOLUTION_NEUTRAL)};ob.rawloadvalue=function(c){this.value=c;this.element.cval=c;this.message="";this.image.src="../../images/questionmark.png";if((c=="0")||(c=="")){this.element.checked=false;this.element.indeterminate=true}if(v=="1"){this.element.checked=true;this.element.indeterminate=false}if(v=="2"){this.element.checked=false;this.element.indeterminate=false}}}else{}}var l=100;if((o==1)|(o==3)|(o==4)|(o==5)|(o==7)){ob.convertinput=function(){return mparser.convertMathInput(notationParser_IN(this.rawinput),l)}}else{if(o==6){ob.convertinput=function(){return mparser.convertMathInput(notationParser_IN(this.rawinput),l)}}}FVAR.push(ob)}function toggle_settings(){var a=document.getElementById("settings");if(a!=null){if(a.style.visibility=="hidden"){a.style.top="15%";a.style.left="15%";a.style.width="70%";a.style.height="70%";a.style.visibility="visible";MathJax.Hub.Queue(["Typeset",MathJax.Hub,a])}else{a.style.top="0";a.style.left="0";a.style.width="0";a.style.height="0";a.style.visibility="hidden"}}}function selectColor(a){logMessage(DEBUGINFO,"Color select: "+a);if(intersiteactive==true){if(intersiteobj!=null){intersiteobj.configuration.stylecolor=a}}applyLayout(false)}function toggle_hint(a){var b=document.getElementById(a);if(b!=null){if(b.style.display=="none"){b.style.display="block"}else{b.style.display="none"}}b=document.getElementById(a+"_button");if(b!=null){if(b.className=="hintbutton_closed"){b.className="hintbutton_open"}else{if(b.className=="hintbutton_open"){b.className="hintbutton_closed"}else{if(b.className=="chintbutton_closed"){b.className="chintbutton_open"}else{if(b.className=="chintbutton_open"){b.className="chintbutton_closed"}}}}}}function checkSimplification(f,a){var b=new Array();if(a.indexOf("|")!=-1){b.push(new Array("abs(...) statt |...|",1))}if(a.indexOf("e^")!=-1){b.push(new Array("exp(TERM) statt e^TERM",1))}if(a.indexOf("\\")!=-1){b.push(new Array("Backslash-Notation verwendet",0))}if(a.indexOf(")(")!=-1){b.push(new Array("(...)*(...) statt (...)(...)",1))}var g=/(\d+)([a-zA-Z(]+)/;var e=g.exec(a);if(e!=null){if(e.length>=3){b.push(new Array("Produkte in Form "+e[1]+"*"+e[2]+" statt "+e[1]+e[2],1))}}if((f&15)==1){var h=new RegExp("\\[","gi");a=a.replace(h,"(");h=new RegExp("\\]","gi");a=a.replace(h,")");if((a.indexOf("(")!=-1)||(a.indexOf(")")!=-1)){b.push(new Array("L&#246;sung ist nicht vereinfacht",1))}}if((f&15)==3){var h=new RegExp("\\[","gi");a=a.replace(h,"(");h=new RegExp("\\]","gi");a=a.replace(h,")")}if((f&16)==16){if(a.indexOf("/")!=-1){if(a.indexOf("/")!=a.lastIndexOf("/")){b.push(new Array("Bruch ist nicht zusammengefasst",1))}}}if((f&64)==64){if(a.indexOf("sqrt")!=-1){b.push(new Array("Wurzeln sollen als Exponenten geschrieben werden",1))}}if((f&128)==128){if((a.indexOf("abs")!=-1)|(a.indexOf("|")!=-1)){b.push(new Array("Betragsstriche sollen durch eine Fallunterscheidung geschrieben werden",1))}}if((f&256)==256){if((a.indexOf("^")!=-1)|(a.indexOf("/")!=-1)){b.push(new Array("L&#246;sung darf keine Nenner oder Potenzen enthalten",1))}}if((f&1024)==1024){var c=a.trim();if(isProperNumber(c)==false){b.push(new Array("L&#246;sung soll eine Zahl sein",1))}}if((f&2048)==2048){if(a.indexOf("^")!=-1){if(a.indexOf("^")!=a.lastIndexOf("^")){b.push(new Array("Potenzen sollen zusammengefasst werden",1))}}else{if((a.indexOf("/")!=-1)||(a.indexOf("*")!=-1)){b.push(new Array("Nenner und Faktoren sollen aufgel&#246;st werden",1))}}}return b}function isProperNumber(a){if(a.indexOf("x")!=-1){return false}if(a.indexOf("b")!=-1){return false}if(a.indexOf("o")!=-1){return false}return $.isNumeric(a)}function handlerFocus(a){if(FVAR[a].id!=activefieldid){handlerChange(a,1)}}function handlerBlur(a){if(FVAR[a].id==activefieldid){closeInputContent()}}function handlerChange(a,h){if(FVAR[a].type==2){if(FVAR[a].smc.length>0){h=0}}var g=0;if(FVAR[a].type==4){g=1}if(g==1){var c=document.getElementById(FVAR[a].id);FVAR[a].rawinput=c.value;FVAR[a].texinput="";if(c.value!=""){try{var b=FVAR[a].convertinput();FVAR[a].texinput=notationParser_OUT(b.latex);FVAR[a].parsedinput=b.mathjs;FVAR[a].valcode=mathJS.compile(b.mathjs);FVAR[a].valvalid=true}catch(c){if(FVAR[a].texinput==""){FVAR[a].texinput="\\text{(Fehlerhafte Eingabe)}"}FVAR[a].parsedinput="0";FVAR[a].valcode=mathJS.compile("0");FVAR[a].valvalid=false}}else{FVAR[a].texinput="\\text{(Keine Eingabe)}";FVAR[a].parsedinput="0";FVAR[a].valcode=mathJS.compile("0");FVAR[a].valvalid=false}}if(h!=1){check_group(a,a);if(FVAR[a].points==FVAR[a].maxpoints){if((intersiteactive==true)&&(FVAR[a].sync==1)){if(intersiteobj.configuration.CF_TESTS=="1"){var j="";var f=+new Date();j="EXSUCCESS: CID:"+signature_CID+", user:"+intersiteobj.login.username+", timestamp:"+f+", pagename:"+fullName+", uxid:"+FVAR[a].uxid+", elementid:"+a+", input:"+FVAR[a].rawinput+", message:"+FVAR[a].message;sendeFeedback({statistics:j},true)}}}}if(g==1){var k=FVAR[a].texinput;displayInputContent(a,k);var i=document.getElementById("UFIDM"+activefieldid);if(i!=null){i.innerHTML=FVAR[a].message;i.style.background=c.style.background}else{logMessage(VERBOSEINFO,"UFIDM not available")}}else{closeInputContent()}}function group_button(b,a){check_group(b,a)}function check_all(){if(FVAR.length>1){check_group(1,FVAR.length-1)}}function rawParse(g){try{var a=mparser.convertMathInput(g,2);var b=a.mathjs;var f=mparser.evalMathJS(b);return f}catch(c){return NaN}}function check_group(input_from,input_to){var d=document;var i;var s;if(isTest==true){nPoints=0;nMaxPoints=0}for(i=input_from;i<=input_to;i++){s=FVAR[i].id;var e=d.getElementById(s);switch(FVAR[i].type){case 1:var v=e.value;var sol=FVAR[i].solution;FVAR[i].rawinput=v;if(v==sol){FVAR[i].message="";notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{if(v==""){FVAR[i].message="";notifyPoints(i,0,SOLUTION_NEUTRAL)}else{FVAR[i].message="L&#246;sung inkorrekt";notifyPoints(i,0,SOLUTION_FALSE)}}break;case 2:var v=e.cval;if(v==""){logMessage(VERBOSEINFO,'cval "" mapped to "0"');v="0"}if(v=="1"){var j;for(j=0;j<FVAR[i].smc.length;j++){logMessage(VERBOSEINFO,"smc exclude = "+FVAR[i].smc[j]);var k;for(k=0;k<FVAR.length;k++){if(FVAR[k].uxid==FVAR[i].smc[j]){FVAR[k].value="2";FVAR[k].rawinput="2";var f=d.getElementById(FVAR[k].id);if(f!=null){f.checked=false;f.indeterminate=false;f.setAttribute("data-val","2")}notifyPoints(k,1,SOLUTION_TRUE)}}}}FVAR[i].value=v;FVAR[i].rawinput=v;if(v=="0"){notifyPoints(i,0,SOLUTION_NEUTRAL)}else{if(v==FVAR[i].solution){notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{notifyPoints(i,0,SOLUTION_FALSE)}}break;case 3:FVAR[i].rawinput=e.value;var stellen=FVAR[i].option;var soluta=FVAR[i].solution.split(",");var valuta={};var ok=1;var solleer=0;if(FVAR[i].solution==""){solleer=1;soluta={}}if((soluta.length==1)&&(solleer==0)){valuta=notationParser_IN(e.value).split(",");if(valuta.length!=1){ok=0}else{if((valuta[0].indexOf("{")!=-1)|(valuta[0].indexOf("}")!=-1)){ok=0}}}else{var tr=notationParser_IN(e.value).trim();if((tr.indexOf("{")!=0)|(tr.indexOf("}")!=(tr.length-1))){ok=0}else{var st=tr.substr(1,tr.length-2);if(st.trim()==""){valuta={};logMessage(VERBOSEINFO,"Benutzer hat leere Menge eingegeben")}else{valuta=st.split(",");if(valuta.length==1){valuta=st.split(";")}}}}for(vj=0;((vj<valuta.length)&(ok==1));vj++){var c=0;var v=rawParse(valuta[vj]);for(sj=0;((sj<soluta.length)&(c==0));sj++){var s=rawParse(soluta[sj]);if(Math.abs(extround(v,stellen)-extround(s,stellen))<=Math.pow(10,(stellen+2)*(-1))){c=1}}if(c==0){ok=0}}for(sj=0;((sj<soluta.length)&(ok==1));sj++){var c=0;var s=rawParse(soluta[sj]);for(vj=0;((vj<valuta.length)&(c==0));vj++){var v=rawParse(valuta[vj]);if(Math.abs(extround(v,stellen)-extround(s,stellen))<=Math.pow(10,(stellen+2)*(-1))){c=1}}if(c==0){ok=0}}if(ok==1){FVAR[i].message="";notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{if(e.value==""){FVAR[i].message="";notifyPoints(i,0,SOLUTION_NEUTRAL)}else{if((soluta.length==1)&&(solleer==0)){FVAR[i].message="Wert inkorrekt"}else{FVAR[i].message="L&#246;sungsmenge inkorrekt"}notifyPoints(i,0,SOLUTION_FALSE)}}break;case 4:var options=FVAR[i].option.split(";",4);var stuetzen=options[0];var varia=options[1].split(",");var stellen=options[2];var vereinfachung=options[3];var k;var message="";var ok=true;if(FVAR[i].valvalid==false){ok=false;message="Frage noch nicht beantwortet"}else{var c1,c2;if((vereinfachung&32)==32){var scope=mathJSFunctions;scope[varia[0]]=1.234;c1=FVAR[i].valcode.eval(scope);c2=FVAR[i].solcode.eval(scope)}var first;if((vereinfachung&512)==512){first=1.195785684}else{first=1-(stuetzen*0.5)}vv=[];for(vj=0;vj<varia.length;vj++){vv[vj]=first}try{var ok=true;var fini=false;while(fini==false){var scope=mathJSFunctions;for(vj=0;vj<varia.length;vj++){scope[varia[vj]]=vv[vj]}s=FVAR[i].solcode.eval(scope);v=FVAR[i].valcode.eval(scope);if((vereinfachung&32)==32){s=s-c2;v=v-c1}var pd="norm("+s+" - "+v+")";var ed=rawParse(pd);if(!(Math.abs(extround(ed,stellen)-extround(0,stellen))<=Math.pow(10,(stellen+2)*(-1)))){ok=false;fini=true;message="Eingabe ist noch nicht richtig"}var index=0;var inc=true;while(inc==true){(vv[index])++;if(vv[index]>stuetzen){vv[index]=first;index++;if(index==varia.length){inc=false;fini=true}}else{inc=false}}}if(ok==true){message="Dies ist eine richtige L&#246;sung"}}catch(e){ok=false;message="Form der Eingabe ist fehlerhaft"}var messages=checkSimplification(vereinfachung,FVAR[i].rawinput);for(k=0;k<messages.length;k++){message=message+"<div style='color:#454545'>"+messages[k][0]+"</div>";if(messages[k][1]==1){ok=false}}}FVAR[i].message=message;if(ok){notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{if(e.value==""){notifyPoints(i,0,SOLUTION_NEUTRAL)}else{notifyPoints(i,0,SOLUTION_FALSE)}}break;case 6:FVAR[i].rawinput=e.value;var b=notationParser_IN(e.value.trim());b=b.replace(/;/gi,",");var stellen=FVAR[i].option;var typl=0;var typr=0;var btypl=0;var btypr=0;ok=0;if(FVAR[i].solution.indexOf("(")!=-1){typl=1}if(FVAR[i].solution.indexOf("[")!=-1){typl=2}if(FVAR[i].solution.indexOf("(-infty")!=-1){typl=3}if(FVAR[i].solution.indexOf("(infty")!=-1){typl=0}if(FVAR[i].solution.indexOf(")")!=-1){typr=1}if(FVAR[i].solution.indexOf("]")!=-1){typr=2}if(FVAR[i].solution.indexOf("infty)")!=-1){typr=3}if(FVAR[i].solution.indexOf("-infty)")!=-1){typr=0}if((typr==0)||(typl==0)){logMessage(CLIENTERROR,"Loesungsintervall "+FVAR[i].solution+" ist fehlerhaft")}else{b=b.replace(/infinity/g,"infty");b=b.replace(/unendlich/g,"infty");if(b.indexOf("(")!=-1){btypl=1}if(b.indexOf("[")!=-1){btypl=2}if(b.indexOf("(-infty")!=-1){btypl=3}if(b.indexOf("(infty")!=-1){btypl=0}if(b.indexOf(")")!=-1){btypr=1}if(b.indexOf("]")!=-1){btypr=2}if(b.indexOf("infty)")!=-1){btypr=3}if(b.indexOf("-infty)")!=-1){btypr=0}if((typl==btypl)&&(typr==btypr)){var s=b.split(",");var t=FVAR[i].solution.split(",");if(s.length==2){ok=1;s[0]=s[0].substring(1,s[0].length).trim();s[1]=s[1].substring(0,s[1].length-1).trim();t[0]=t[0].substring(1,t[0].length).trim();t[1]=t[1].substring(0,t[1].length-1).trim();if(typl!=3){var h=rawParse(s[0]);if((isNaN(h))|(Math.abs(extround(h,stellen)-extround(rawParse(t[0]),stellen))>Math.pow(10,(stellen+2)*(-1)))){ok=0}}if(typr!=3){var h=rawParse(s[1]);if((isNaN(h))|(Math.abs(extround(h,stellen)-extround(rawParse(t[1]),stellen))>Math.pow(10,(stellen+2)*(-1)))){ok=0}}}}}if(ok==1){FVAR[i].message="Dies ist eine richtige L&#246;sung";notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{if(e.value==""){FVAR[i].message="";notifyPoints(i,0,SOLUTION_NEUTRAL)}else{FVAR[i].message="Ist nicht das gesuchte Intervall";notifyPoints(i,0,SOLUTION_FALSE)}}break;case 7:FVAR[i].rawinput=e.value;var b=notationParser_IN(e.value.trim());var ok=0;var options=FVAR[i].option.split(";",4);var stuetzen=options[0];var varia=options[1].split(",");var stellen=options[2];var styp=options[3];var message="";switch(styp){case"onlyempty":if(b.trim().length==0){ok=1}break;case"vector":var n=rawParse(b);ok=1;break;case"evennat":var n=rawParse(b);if((n>=1)&&(Math.floor(n)==n)&&(n%2==0)){ok=1}break;case"oddnat":var n=rawParse(b);if((n>=1)&&(Math.floor(n)==n)&&(n%2==1)){ok=1}break;case"intervalelement":var typl=0,typr=0;var s=FVAR[i].solution;if(s.indexOf("(")!=-1){typl=1}if(s.indexOf("[")!=-1){typl=2}if(s.indexOf("(-infty")!=-1){typl=3}if(s.indexOf("(infty")!=-1){typl=0}if(s.indexOf(")")!=-1){typr=1}if(s.indexOf("]")!=-1){typr=2}if(s.indexOf("infty)")!=-1){typr=3}if(s.indexOf("-infty)")!=-1){typr=0}if((typr==0)||(typl==0)){logMessage(CLIENTERROR,"Loesungsintervall "+FVAR[i].solution+" ist fehlerhaft (Aufgabe Typ 7)")}else{var t=s.split(",");if(t.length==2){ok=1;var l=rawParse(b);if(b.trim()==""){l=NaN;ok=0}t[0]=t[0].substring(1,t[0].length).trim();t[1]=t[1].substring(0,t[1].length-1).trim();var h0=rawParse(t[0]);var h1=rawParse(t[1]);var sl=l+" ";if((sl.indexOf(",")!=-1)|(sl.indexOf("[")!=-1)|(sl.indexOf("]")!=-1)){ok=0}else{if((typl==1)&&(h0>=l)){ok=0}if((typl==2)&&(h0>l)){ok=0}if((typr==1)&&(h1<=l)){ok=0}if((typr==2)&&(h1<l)){ok=0}}}}break;case"exactfraction":var options=FVAR[i].option.split(";",4);var stellen=options[0];var s=FVAR[i].solution;var sp=-1.2;var l=0;if(b.trim()==""){l=NaN;ok=0}else{l=rawParse(b);sp=rawParse(s);ok=1}if(Math.abs(extround(l,stellen)-extround(sp,stellen))<=Math.pow(10,(stellen+2)*(-1))){}else{ok=0}if(b.indexOf("/")==-1){var rx=/(-?\d+)/;var m;if((m=rx.exec(b))!=null){if(m[1]!=b){ok=0}}else{ok=0}}else{var fr=b.split("/");if(fr.length!=2){ok=0}else{fr[0]=fr[0].trim();fr[1]=fr[1].trim();var rex=/(-?\d+)/;var u;if((u=rex.exec(fr[0]))!=null){if(u[1]==fr[0]){if((u=rex.exec(fr[1]))!=null){if(u[1]==fr[1]){var a=rawParse(fr[0]);if(a<0){a=-a}var b=rawParse(fr[1]);var g=mygcd(a,b);if((g!=1)||(b<=0)){ok=0}}else{ok=0}}else{ok=0}}else{ok=0}}else{ok=0}}}break;case"inputstring2":if(b.length==2){ok=1}break;case"inputnumber2":if(b.length==2){if(isNaN(parseInt(b))==false){ok=1}}break;default:logMessage(CLIENTERROR,"STYP "+styp+" nicht bekannt (MSpecialQuestion)");ok=0;break}if(ok==1){FVAR[i].message="Dies ist eine richtige L&#246;sung";notifyPoints(i,FVAR[i].maxpoints,SOLUTION_TRUE)}else{if(e.value==""){FVAR[i].message="";notifyPoints(i,0,SOLUTION_NEUTRAL)}else{FVAR[i].message="Ist keine richtige L&#246;sung";notifyPoints(i,0,SOLUTION_FALSE)}}break}}}function checkCESyntax(b,a){var c=b.getValue();a.setViewText(c)}function ScanParentsForApi(b){var a=0;while((b.API_1484_11==null)&&(b.parent!=null)&&(b.parent!=b)&&(a<=500)){a++;b=b.parent}return b.API_1484_11}function GetSCORMApi(){var a=null;if((window.parent!=null)&&(window.parent!=window)){a=ScanParentsForApi(window.parent)}if((a==null)&&(window.top.opener!=null)){a=ScanParentsForApi(window.top.opener)}return a}function GetInteractionID(b){if(objScormApi==null){return -1}var c=objScormApi.GetValue("cmi.interactions._count");var e=-1;for(e=0;e<c;e++){var a=objScormApi.GetValue("cmi.interactions."+e+".id");if(a==b){return e}}objScormApi.SetValue("cmi.interactions."+c+".id",b);objScormApi.SetValue("cmi.interactions."+c+".type","long-fill-in");objScormApi.SetValue("cmi.interactions."+c+".description","Question id "+b);objScormApi.SetValue("cmi.interactions."+c+".learner_response","");objScormApi.SetValue("cmi.interactions."+c+".result","neutral");return c}function GetResult(b){if(intersiteactive==true){if(intersiteobj.configuration.CF_LOCAL=="1"){var a=0;for(a=0;a<intersiteobj.scores.length;a++){if(intersiteobj.scores[a].uxid==b){return intersiteobj.scores[a].rawinput}}}}return null}function InitResults(j){logMessage(DEBUGINFO,"InitResults (empty="+j+", isTest="+isTest+") start");var h=document.getElementById("TESTEVAL");if((j==true)&(h!=null)){h.innerHTML="Test ist noch nicht abgeschlossen."}if(isTest==true){testFinished=false}var c=0;for(c=1;c<FVAR.length;c++){FVAR[c].prepare()}if(intersiteactive==true){if(intersiteobj.configuration.CF_LOCAL=="0"){j=true}}if((j==true)||(intersiteactive!=true)){for(c=1;c<FVAR.length;c++){FVAR[c].clear()}}if((intersiteactive==true)&&(j==false)){logMessage(VERBOSEINFO,"Performing MQuestion-result reload");var g="";var b="";for(c=1;c<FVAR.length;c++){var k=document.getElementById(FVAR[c].id);if(FVAR[c].sync==1){b=GetResult(FVAR[c].uxid)}else{b=null}if(b==null){b=""}switch(FVAR[c].type){case 1:k.value=b;FVAR[c].rawinput=b;check_group(c,c);break;case 2:logMessage(VERBOSEINFO,"tristate init v = "+b);if((b=="0")||(b=="")){k.cval="0";k.checked=false;k.indeterminate=true;FVAR[c].clear()}if(b=="1"){k.cval="1";k.checked=true;k.indeterminate=false;check_group(c,c)}if(b=="2"){k.cval="2";k.checked=false;k.indeterminate=false;check_group(c,c)}break;case 3:k.value=b;FVAR[c].rawinput=b;check_group(c,c);break;case 4:if(b.trim()!=""){k.value=b;FVAR[c].rawinput=b;try{var a=FVAR[c].convertinput();FVAR[c].texinput=notationParser_OUT(a.latex);FVAR[c].parsedinput=a.mathjs;FVAR[c].valcode=mathJS.compile(a.mathjs);FVAR[c].valvalid=true}catch(k){if(FVAR[c].texinput==""){FVAR[c].texinput="\\text{(Fehlerhafte Eingabe)}"}FVAR[c].parsedinput="0";FVAR[c].valcode=mathJS.compile("0");FVAR[c].valvalid=false}}else{FVAR[c].texinput="\\text{(Keine Eingabe)}";FVAR[c].parsedinput="0";FVAR[c].valcode=mathJS.compile("0");FVAR[c].valvalid=false}check_group(c,c);break;case 6:k.value=b;FVAR[c].rawinput=b;check_group(c,c);break;case 7:k.value=b;FVAR[c].rawinput=b;check_group(c,c);break}}}else{for(c=1;c<FVAR.length;c++){FVAR[c].clear()}}}function finish_button(a){check_all();var g=document.getElementById("TESTEVAL");var c=1;var i=100*nPoints/nMaxPoints;if(g!=null){g.innerHTML="";g.innerHTML+="<strong>"+a+" wurde abgeschlossen:</strong><br />";g.innerHTML+="Im Test erreichte Punkte: "+nPoints+"<br />";g.innerHTML+="Maximal erreichbare Punkte: "+nMaxPoints+"<br />";g.innerHTML+="Der Test wird abgeschickt, wenn mindestens ein Punkt erreicht wurde.<br /><br />";if(nPoints<c){g.innerHTML+="<strong>Der Test ist noch nicht abgeschickt.</strong><br />"}else{g.innerHTML+="Test ist eingereicht, kann aber weiter bearbeitet und erneut abgeschickt werden.<br />"}if(SITE_UXID=="VBKMT_AbgebeTest"){i=Math.round(i*100)/100;g.innerHTML+="<emph>Es wurden "+i+"% der Punkte erreicht!</emph><br /><br />"}}if(isTest==true){testFinished=true;if((intersiteactive==true)&&(intersiteobj.configuration.CF_TESTS=="1")){pushISO(false);var h=+new Date();var j="TESTFINISH: CID:"+signature_CID+", user:"+intersiteobj.login.username+", timestamp:"+h+", testname:"+a+", nPoints:"+nPoints+", maxPoints:"+nMaxPoints+", ratio:"+(nPoints/nMaxPoints)+", nMinPoints:"+c;sendeFeedback({statistics:j},true);logMessage(VERBOSEINFO,"Testfinish gesendet")}if((doScorm==1)&&(SITE_UXID=="VBKMT_AbgebeTest")){logMessage(VERBOSEINFO,"ENTRYTEST geht an SCORM");var k=0;var e=0;var b=0;var l=pipwerks.SCORM.init();logMessage(VERBOSEINFO,"SCORM init = "+l);l=pipwerks.SCORM.get("cmi.learner_id");logMessage(VERBOSEINFO,"SCORM learner id = "+l);l=pipwerks.SCORM.get("cmi.learner_name");logMessage(VERBOSEINFO,"SCORM learner name = "+l);l=pipwerks.SCORM.set("cmi.interactions.0.id","TEST");logMessage(VERBOSEINFO,"SCORM set interact_id = "+l);l=pipwerks.SCORM.set("cmi.interactions.0.learner_response",nPoints);logMessage(VERBOSEINFO,"SCORM set interact_lr = "+l);l=pipwerks.SCORM.set("cmi.interactions.0.result",true);logMessage(VERBOSEINFO,"SCORM set interact_res = "+l);l=pipwerks.SCORM.set("cmi.score.raw",nPoints);logMessage(VERBOSEINFO,"SCORM set rawpoints = "+l);l=pipwerks.SCORM.set("cmi.score.min",c);logMessage(VERBOSEINFO,"SCORM set minpoints = "+l);l=pipwerks.SCORM.set("cmi.score.max",nMaxPoints);logMessage(VERBOSEINFO,"SCORM set maxpoints = "+l);l=pipwerks.SCORM.set("cmi.score.scaled",(nPoints/nMaxPoints));logMessage(VERBOSEINFO,"SCORM set scaled points = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.id","Abschlusstests");logMessage(VERBOSEINFO,"SCORM set objectives = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.raw",nPoints);logMessage(VERBOSEINFO,"SCORM set obrawpoints = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.min",c);logMessage(VERBOSEINFO,"SCORM set obminpoints = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.max",nMaxPoints);logMessage(VERBOSEINFO,"SCORM set obmaxpoints = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.scaled",(nPoints/nMaxPoints));logMessage(VERBOSEINFO,"SCORM set obscaled = "+l);l=pipwerks.SCORM.set("cmi.objectives.0.completion_status",(nPoints>=c)?("completed"):("incomplete"));logMessage(VERBOSEINFO,"SCORM set obcompletion "+l);l=pipwerks.SCORM.set("cmi.scaled_passed_score",c/nMaxPoints);logMessage(VERBOSEINFO,"SCORM set obscossc "+l);l=pipwerks.SCORM.set("cmi.score",nPoints/nMaxPoints);logMessage(VERBOSEINFO,"SCORM set obscore "+l);l=pipwerks.SCORM.set("cmi.progress_measure",(nPoints/nMaxPoints));logMessage(VERBOSEINFO,"SCORM set progress measure = "+l);l=pipwerks.SCORM.set("cmi.success_status",(nPoints>=c)?("passed"):("failed"));logMessage(VERBOSEINFO,"SCORM set obcomp = "+l);l=pipwerks.SCORM.set("cmi.completion_status",(nPoints>=c)?("completed"):("incomplete"));logMessage(VERBOSEINFO,"SCORM set completion "+l);l=pipwerks.SCORM.save();logMessage(DEBUGINFO,"SCORM save = "+l);if(l==true){g.innerHTML+="Die Punktzahl wurde zur statistischen Auswertung übertragen\n"}}}}function reset_button(){logMessage(DEBUGINFO,"reset_button start");InitResults(true)}function notifyPoints(g,h,m){FVAR[g].points=h;if((isTest==true)&&(FVAR[g].sync==1)){nPoints+=h;nMaxPoints+=FVAR[g].maxpoints}if((intersiteactive==true)&&(FVAR[g].sync==1)){if((intersiteobj.configuration.CF_LOCAL=="1")&&(intersiteobj.configuration.CF_TESTS=="1")){var l=false;var c=0;for(c=0;c<intersiteobj.scores.length;c++){if(intersiteobj.scores[c].uxid==FVAR[g].uxid){l=true;intersiteobj.scores[c].maxpoints=FVAR[g].maxpoints;intersiteobj.scores[c].points=h;intersiteobj.scores[c].siteuxid=SITE_UXID;intersiteobj.scores[c].section=FVAR[g].section;intersiteobj.scores[c].id=FVAR[g].id;intersiteobj.scores[c].uxid=FVAR[g].uxid;intersiteobj.scores[c].intest=FVAR[g].intest;intersiteobj.scores[c].rawinput=FVAR[g].rawinput;intersiteobj.scores[c].value=FVAR[g].value;intersiteobj.scores[c].state=m;logMessage(VERBOSEINFO,"Points for "+SITE_UXID+"->"+FVAR[g].uxid+" modernized, rawinput = "+intersiteobj.scores[c].rawinput)}}if(l==false){var b=intersiteobj.scores.length;intersiteobj.scores[b]={uxid:FVAR[g].uxid};intersiteobj.scores[b].maxpoints=FVAR[g].maxpoints;intersiteobj.scores[b].points=h;intersiteobj.scores[b].siteuxid=SITE_UXID;intersiteobj.scores[b].section=FVAR[g].section;intersiteobj.scores[b].id=FVAR[g].id;intersiteobj.scores[b].intest=FVAR[g].intest;intersiteobj.scores[b].value=FVAR[g].value;intersiteobj.scores[b].rawinput=FVAR[g].rawinput;intersiteobj.scores[b].state=m;logMessage(VERBOSEINFO,"Points for "+FVAR[g].uxid+" ADDED at position "+b)}}}var a=document.getElementById(FVAR[g].imgid);if(a==null){logMessage(VERBOSEINFO,"notifyPoints warning: img=0, type = "+FVAR[g].type)}else{switch(m){case SOLUTION_TRUE:a.src="../../images/right.png";break;case SOLUTION_FALSE:a.src="../../images/false.png";break;case SOLUTION_NEUTRAL:a.src="../../images/questionmark.png";break}}if(FVAR[g].type!=2){var o=document.getElementById(FVAR[g].id);switch(m){case SOLUTION_TRUE:o.style.background=QCOLOR_TRUE;break;case SOLUTION_FALSE:o.style.background=QCOLOR_FALSE;break;case SOLUTION_NEUTRAL:o.style.background=QCOLOR_NEUTRAL;break}}updateLayoutStates()}function globalunloadHandler(){if(timerActive){window.clearInterval(timerVar);timerActive=false}pushISO(true);if(pipwerks.scormdata.connection.isActive==true){logMessage(VERBOSEINFO,"pipwerks.scormdata.connection.isActive == true in globalunloadHandler");pipwerks.SCORM.save()}else{logMessage(VERBOSEINFO,"pipwerks.scormdata.connection.isActive == false in globalunloadHandler")}}function globalloadHandler(a){logMessage(DEBUGINFO,"globalLoadHandler start, pulluser = "+((a=="")?('""'):("userdata")));if(a!=""){SetupIntersite(false,a);logMessage(DEBUGINFO,"SetupIntersite in loadhandler fertig");applyLayout(false);logMessage(DEBUGINFO,"Layout gesetzt in loadhandler");InitResults(false);logMessage(DEBUGINFO,"Results eingetragen")}if(timerActive==false){timerActive=true;timerVar=window.setInterval(globalTimerHandler,timerMillis)}logMessage(DEBUGINFO,"globalLoadHandler finish")}function globalreadyHandler(a){logMessage(DEBUGINFO,"globalreadyHandler start");SetupIntersite(false,a);logMessage(DEBUGINFO,"SetupIntersite fertig");applyLayout(true);logMessage(DEBUGINFO,"Layout gesetzt");InitResults(false);logMessage(DEBUGINFO,"Results eingetragen");logMessage(DEBUGINFO,"globalreadyHandler finish")}function fillUserField(){logMessage(DEBUGINFO,"fillUserField start");if(isTest==true){var a=document.getElementById("UFID");if(a!=null){if(lName!=""){a.value=lName+"\n(ID: "+lID+")"}else{a.value="<Nicht angemeldet>"}if(nPoints>0){if(nMaxPoints>0){a.value+="\nPunkte erreicht: "+nPoints+" von "+nMaxPoints}else{a.value+="\nPunkte erreicht: "+nPoints}}else{if(nMaxPoints>0){a.value+="\nPunkte zu erreichen: "+nMaxPoints}}a.readOnly=true}}}function getScrollY(){var a=0;if(typeof(window.pageYOffset)=="number"){a=window.pageYOffset;scrOfX=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;scrOfX=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;scrOfX=document.documentElement.scrollLeft}}}return a}function getGlobalValue(a){var b;for(b=0;b<MVAR.length;b++){if(MVAR[b].vname==a){return MVAR[b].value()}}return 0}function rerollMVar(a){var c;for(c=0;c<MVAR.length;c++){if(MVAR[c].vname==a){MVAR[c].reroll();var b=0;for(b=0;b<MVAR[c].deps.length;b++){MVAR[c].deps[b].valueHasMutated()}check_group(1,FVAR.length-1);return MVAR[c].value()}}return 0}function registerVariables(c,e){var a=0;for(a=0;a<MVAR.length;a++){var b=MVAR[a].vname;if(c.search("[var_"+b+"]")!=-1){MVAR[a].deps.push(e)}}}function closeInputContent(){viewmodel.ifobs("");var a=document.getElementById("UFIDM");if(a!=null){a.value=""}if(activefieldid!=""){if(activetooltip==null){logMessage(DEBUGINFO,"activefieldid ohne tooltip!")}else{var b=activetooltip.qtip("api");b.toggle(false);b.destroy();activetooltip=null}activefieldid=""}}function displayInputContent(j,h){h="\\displaystyle\\large "+h;activefieldid=FVAR[j].id;if(activetooltip!=null){}else{var f="";if((isTest==false)|(testFinished==true)){f='<div id="NINPUTFIELD'+activefieldid+'" data-bind="evalmathjax: ifobs"></div><br /><div name="NUSERMESSAGE" id="UFIDM'+activefieldid+'" style="line-height:110%; color:#000000; border: thin solid rgb(0,0,0); padding: 8px; background-color:#CFDFDF; width:250px; font-size:11pt; font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", Verdana, Arial, Helvetica , sans-serif;"></div>'}else{f='<div id="NINPUTFIELD'+activefieldid+'" data-bind="evalmathjax: ifobs"></div><br />(im laufenden Test keine Tipps)'}activetooltip=$(' input[id="'+activefieldid+'"] ').qtip({id:"activetooltip",show:{event:"customShow"},hide:{event:"customHide"},content:"...",style:{classes:"qtip-blue qtip-shadow"}});var c=activetooltip.qtip("api");c.set("content.title","Formeleingabe");c.set("content.text",f);c.show()}viewmodel.ifobs(h);var a=document.getElementById("NINPUTFIELD"+activefieldid);if(a.childNodes[0]){var g=MathJax.Hub.getAllJax(a)[0];MathJax.Hub.Queue(["Text",g,h])}else{var b=document.createElement("script");b.type="math/tex; mode=display";try{b.appendChild(document.createTextNode(h));a.appendChild(b)}catch(i){b.text=h;a.appendChild(b)}MathJax.Hub.Queue(["Typeset",MathJax.Hub,a])}}function permuteString(e,a){var f=e.length;var c="";var b;for(b=0;b<f;b++){c+=e.charAt((a*b)%f)}return c}function debork(c,a){var e=c.length;u=(((5*e)-(3*a))%e);while(mygcd(u,e)!=1){u=((u+1)%e)}var b=0;while(((b*u)%e)!=1){b++}c=permuteString(c,b);return c.slice(0,a)}function selectVariant(a){logMessage(DEBUGINFO,"Variant selected: "+a);s=window.location.href;ex1="_"+variant;if(variant=="std"){ex1=""}ex1=outputExtension+ex1;ex2="_"+a;if(a=="std"){ex2=""}ex2=outputExtension+ex2;s=s.replace("/"+ex1+"/","/"+ex2+"/");opensite(s)}function rouletteClick(b,g,a){var f=Math.floor((Math.random()*a));var c=document.getElementById("DROULETTE"+b+"."+g);if(c!=null){c.style.display="none"}c=document.getElementById("DROULETTE"+b+"."+f);if(c!=null){c.style.display="block"}}function rid_success(b){var a=JSON.stringify(b);logMessage(VERBOSEINFO,"rid_success: "+a)}function rid_error(a,b){logMessage(VERBOSEINFO,"rid_error: "+a+", data = "+JSON.stringify(b))}function rouletteExercise(a){exercises.getCollection(a,rid_success,rid_error)}function styleColors(a){if(a.length==6){if(intersiteactive==true){if(intersiteobj!=null){if(typeof intersiteobj.configuration.stylecolor=="string"){if(intersiteobj.configuration.stylecolor==STYLEGREEN){a=a.substr(0,2)+a.substr(4,2)+a.substr(2,2)}else{if(intersiteobj.configuration.stylecolor==STYLERED){a=a.substr(4,2)+a.substr(0,2)+a.substr(2,2)}else{if(intersiteobj.configuration.stylecolor==STYLEGREY){a=a.substr(4,2)+a.substr(4,2)+a.substr(4,2)}}}}else{logMessage(DEBUGINFO,"No stylecolor found in configuration")}}}}return a}function applyLayout(i){updateLayoutStates();var l=document.getElementById("dynamic_css");if(l==null){l=document.createElement("style");l.setAttribute("id","dynamic_css");document.body.appendChild(l)}if(intersiteactive){SIZES.BASICFONTSIZE=SIZES.STARTFONTSIZE+intersiteobj.layout.fontadd;SIZES.SMALLFONTSIZE=SIZES.BASICFONTSIZE-2;SIZES.BIGFONTSIZE=SIZES.BASICFONTSIZE+2;SIZES.MENUWIDTH=160+10*intersiteobj.layout.fontadd;SIZES.TOCWIDTH=SIZES.MENUWIDTH-21}var k=DYNAMICCSS;k=k.replace(/\[LINKPATH\]/g,linkPath);for(var b in COLORS){var h=new RegExp("\\[-"+b+"-\\]","g");k=k.replace(h,"#"+styleColors(COLORS[b]))}for(var b in SIZES){var h=new RegExp("\\[-"+b+"-\\]","g");k=k.replace(h,SIZES[b]+"px")}for(var b in FONTS){var h=new RegExp("\\[-"+b+"-\\]","g");k=k.replace(h,FONTS[b])}l.innerHTML=k;logMessage(DEBUGINFO,"Set dynamic style sheet, size = "+k.length);if(intersiteactive){if(intersiteobj.layout.menuactive==false){hideNavigation(false)}}var m=10+SIZES.BASICFONTSIZE;$("div.headmiddle").height(m);var o='style="max-height:'+m+"px;height:"+m+'px"';var g='style="width:'+(m-2)+"px;height:"+(m-2)+"px;max-height:"+(m-2)+'px"';m=m-2;var p='<a style="max-height:'+m+'px" href="'+linkPath+'config.html" class="MINTERLINK"><div id="loginbutton" style="max-height:'+m+"px;height:"+m+'px;display:inline-block" class="tocminbutton">Anmelden</div></a><a style="max-height:'+m+'px" href="'+linkPath+'cdata.html" class="MINTERLINK"><div id="cdatabutton" style="max-height:'+m+"px;height:"+m+'px;display:inline-block" class="tocminbutton">Kursdaten</div></a> ';p+='<div id="LOGINROW" style="color:rgb(255,255,255)"></div>';p+='<a id="listebutton" href="'+linkPath+'search.html" ></a>';p+='<a id="homebutton" href="'+linkPath+'index.html" ></a>';p+='<button id="starbutton" '+o+' class="symbolbutton" type="button" onclick="starClick();"></button>';p+='<button id="minusbutton" '+o+' class="symbolbutton" type="button" onclick="changeFontSize(-5);"></button>';p+='<button id="plusbutton" '+o+' class="symbolbutton" type="button" onclick="changeFontSize(5);"></button>';p+='<button id="sharebutton" '+o+' class="symbolbutton" type="button" onclick="shareClick();"></button>';p+='<button id="settingsbutton" '+o+' class="symbolbutton" type="button" onclick="toggle_settings();"></button>';p+='<button id="menubutton" '+o+' class="symbolbutton" type="button" onclick="menuClick();"></button>';$("div.headmiddle").each(function(e){$(this).html(p)});$(".navi > ul > li").each(function(e){$(this).hover(function(){$(this).css("background-color",COLORS.TOCMINBUTTONHOVER)},function(){$(this).css("background-color",COLORS.TOCMINBUTTON)})});showHint($("#menubutton"),"Hier klicken um Navigationsleisten ein- oder auszublenden");showHint($("#plusbutton"),"Vergrößert die Schriftgröße");showHint($("#minusbutton"),"Verkleinert die Schriftgröße");showHint($("#settingsbutton"),"Einstellungen");var j="Diese Seite teilen über:<br /><br />";var a=window.location.href;j+='<a href="#" onclick="shareFacebook()"><img src="'+linkPath+'images/sharetargetfacebook.png"></a>';j+="&nbsp;";j+='<a href="http://twitter.com/intent/tweet?url='+a+'" target="_new"><img src="'+linkPath+'images/sharetargettwitter.png"></a>';j+="&nbsp;";j+='<a href="https://plus.google.com/share?url='+a+'" target="_new"><img src="'+linkPath+'images/sharetargetgoogleplus.png"></a>';showHint($("#sharebutton"),j);j="Aktuelle Favoriten:<br /><br />";j+=generateShortFavoriteList()+"<br /><br />";j+='<a style="color:#0000FF"href="'+linkPath+'favor.html">Meine Favoritenliste</a>';showHint($("#starbutton"),j);$("button[ttip='1']").qtip({position:{target:"mouse",adjust:{x:5,y:5}},style:{classes:"qtip-blue qtip-shadow"},content:{attr:"tiptitle"},show:{event:"mouseenter"}});var c=$("input[mtristate=1]"),f;c.prop("mtristate","2").click(function(q){f=$(this);switch(f.prop("cval")){case"2":f.prop("cval","0");f.prop("indeterminate",true);f.prop("checked",false);break;case"1":f.prop("cval","2");f.prop("indeterminate",false);f.prop("checked",false);break;default:f.prop("cval","1");f.prop("indeterminate",false);f.prop("checked",true);break}})}function changeFontSize(a){if(intersiteactive){intersiteobj.layout.fontadd=Math.max(Math.min(intersiteobj.layout.fontadd+a,20),-3);applyLayout(false)}}function hideNavigation(a){var b;if(a==true){b=animationSpeed}else{b=0}$("div.navi").slideUp(b);$("tocnavsymb").hide();$("div.toc").animate({width:"hide"},b);$("#footerleft").slideUp(b/3);$("#footermiddle").slideUp(b/3);$("#footerright").slideUp(b/3);$("#footer").hide();$("#content").css("margin-left","0px");if(intersiteactive){intersiteobj.layout.menuactive=false}}function showNavigation(a){var b;if(a==true){b=animationSpeed}else{b=0}$("#content").css("margin-left",SIZES.MENUWIDTH+"px");$("#footer").show();$("#footerleft").slideDown(b/3);$("#footermiddle").slideDown(b/3);$("#footerright").slideDown(b/3);$("div.toc").animate({width:"show"},b);$("tocnavsymb").show();$("div.navi").slideDown(b);if(intersiteactive){intersiteobj.layout.menuactive=true}}function menuClick(){if($("div.navi").is(":visible")){hideNavigation(true)}else{showNavigation(true)}}function showHint(a,b){b='<div style="font-size:'+SIZES.SMALLFONTSIZE+'px;line-height:100%">'+b+"</div>";if(typeof a.data("qtip")==="object"){a.qtip("option","content.text",b)}else{a.qtip({content:{text:b},show:{delay:750},hide:{delay:1000,fixed:true},position:{my:"top right",at:"bottom left",target:a},style:{classes:"qtip-yellow"}})}}function shareClick(){$("#sharebutton").qtip("toggle","true")}function starClick(){opensite(linkPath+"favor.html")}function shareFacebook(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(location.href),"facebook-share-dialog","width=626,height=436")}function updateLayoutStates(){if(intersiteactive==true){if(intersiteobj!=null){$(".xsymb").each(function(h){el=$(this);ux="SITE_"+el.attr("uxid");var g;var p=false;for(g=0;((g<intersiteobj.sites.length)&&!p);g++){if(intersiteobj.sites[g].uxid==ux){p=true}}if(p){var e;var m=0;var o=0;var c=false;alldone=true;allneutral=true;prob=false;for(e=0;e<intersiteobj.scores.length;e++){if(intersiteobj.scores[e].siteuxid==el.attr("uxid")){c=true;m+=intersiteobj.scores[e].maxpoints;o+=intersiteobj.scores[e].points;if(intersiteobj.scores[e].state==SOLUTION_FALSE){prob=true;alldone=false;allneutral=false}else{if(intersiteobj.scores[e].state==SOLUTION_NEUTRAL){alldone=false}else{allneutral=false}}}}var b="";if((c==false)||(allneutral==true)||(m==0)){el.toggleClass("state_progress",false);el.toggleClass("state_done",false);el.toggleClass("state_problem",false)}else{d=Math.floor((1*o)/(1*m)*100);if(prob){el.toggleClass("state_progress",false);el.toggleClass("state_done",false);el.toggleClass("state_problem",true);b=MESSAGE_PROBLEM+" ("+d+"%)"}else{if(alldone){el.toggleClass("state_progress",false);el.toggleClass("state_done",true);el.toggleClass("state_problem",false);b=MESSAGE_DONE+" ("+d+"%)"}else{el.toggleClass("state_progress",true);el.toggleClass("state_done",false);el.toggleClass("state_problem",false);b=MESSAGE_PROGRESS+" ("+d+"%)"}}}if(b!=""){el.attr("tiptitle",b);el.qtip({position:{target:"mouse",adjust:{x:5,y:5}},style:{classes:"qtip-blue qtip-shadow"},content:{attr:"tiptitle"},show:{event:"mouseenter"}})}}else{el.toggleClass("state_progress",false);el.toggleClass("state_done",false);el.toggleClass("state_problem",false)}if(el.attr("uxid")==SITE_UXID){var l;var f=false;for(l=0;l<timerColors.length;l++){if(timerColors[l][0]==SITE_UXID){f=true;timerColors[l][1]=el;timerColors[l][2]=el.css("color")}}if(!f){n=timerColors.length;timerColors[n]=[SITE_UXID,el,el.css("color")]}}})}}}function globalTimerHandler(){var c;timerIterator++;if(intersiteactive){intersiteobj.history.globalmillis+=timerMillis;var a;var b="SITE_"+SITE_UXID;for(a=0;a<intersiteobj.sites.length;a++){if(intersiteobj.sites[a].uxid==b){intersiteobj.sites[a].millis+=timerMillis}}}};