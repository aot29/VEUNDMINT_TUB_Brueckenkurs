var userdata=(function(f){var a={};var b=f;logMessage(DEBUGINFO,"Benutzer dataserver "+data_server_description+" bei "+b);if(b==""){logMessage(CLIENTERROR,"Kein dataserver deklariert!")}function d(h,g){return function(j,i){if(typeof(j)=="string"){j=JSON.parse(j)}else{if(typeof(j)=="object"){logMessage(DEBUGINFO,"createSuccessCallback: data is already an object (NOT OK)")}else{logMessage(DEBUGINFO,"createSuccessCallback: data is not a valid type (NOT OK)");j={status:false,error:"invalid data object"}}}if(j.status===true){return h(j)}return g(j.error,j)}}function e(g){return function(j,h,i){return g(h,i)}}function c(j,i,k,g,h){logMessage(VERBOSEINFO,"userdata.sendRequest called, url = "+b+", type = "+i+", data = "+JSON.stringify(k));if(forceOffline==1){logMessage(VERBOSEINFO,"sendRequest omitted, course is in offline mode")}$.ajax(b,{type:i,async:j,cache:false,contentType:"application/x-www-form-urlencoded",crossDomain:true,data:k,error:h,success:g})}a.checkUser=function(h,j,i,g){c(h,"GET",{action:"check_user",username:j},d(i,g),e(g))};a.addUser=function(i,l,h,k,j,g){k=(k=="")?undefined:k;c(i,"POST",{action:"add_user",username:l,password:h,role:k},d(j,g),e(g))};a.login=function(i,k,h,j,g){c(i,"POST",{action:"login",username:k,password:h},d(j,g),e(g))};a.logout=function(h,i,g){c(h,"POST",{action:"logout"},d(i,g),e(g))};a.writeData=function(i,l,j,h,k,g){if(h==true){h="true"}c(i,"POST",{action:"write_data",username:l,data:j,overwrite:h},d(k,g),e(g))};a.getUsername=function(h,i,g){c(h,"GET",{action:"get_username"},d(i,g),e(g))};a.getRole=function(h,j,i,g){c(h,"GET",{action:"get_role",username:j},d(i,g),e(g))};a.getData=function(h,j,i,g){c(h,"GET",{action:"get_data",username:j},d(i,g),e(g))};a.getLoginData=function(h,j,i,g){c(h,"GET",{action:"get_login_data",username:j},d(i,g),e(g))};a.delUser=function(h,j,i,g){c(h,"POST",{action:"del_user",username:j},d(i,g),e(g))};a.changePwd=function(h,l,i,k,j,g){c(h,"POST",{action:"change_pwd",username:l,old_password:i,password:k},d(j,g),e(g))};a.changeRole=function(h,k,j,i,g){c(h,"POST",{action:"change_role",username:k,role:j},d(i,g),e(g))};a.setURL=function(g){b=g+"/userdata.php"};return a})(data_server_user);